dr_block                                     = "10.0.1.0/24"
      + enable_dns64                                   = false
      + enable_resource_name_dns_a_record_on_launch    = false
      + enable_resource_name_dns_aaaa_record_on_launch = false
      + id                                             = (known after apply)
      + ipv6_cidr_block_association_id                 = (known after apply)
      + ipv6_native                                    = false
      + map_public_ip_on_launch                        = true
      + owner_id                                       = (known after apply)
      + private_dns_hostname_type_on_launch            = (known after apply)
      + tags                                           = {
          + "Environment" = "dev"
          + "ManagedBy"   = "terraform"
          + "Name"        = "oaktree-dev-public-subnet-a"
          + "Project"     = "oaktree"
        }
      + tags_all                                       = {
          + "Environment" = "dev"
          + "ManagedBy"   = "terraform"
          + "Name"        = "oaktree-dev-public-subnet-a"
          + "Project"     = "oaktree"
        }
      + vpc_id                                         = (known after apply)
    }

  # aws_subnet.public_subnet_b will be created
  + resource "aws_subnet" "public_subnet_b" {
      + arn                                            = (known after apply)
      + assign_ipv6_address_on_creation                = false
      + availability_zone                              = "ap-southeast-1b"
      + availability_zone_id                           = (known after apply)
      + cidr_block                                     = "10.0.2.0/24"
      + enable_dns64                                   = false
      + enable_resource_name_dns_a_record_on_launch    = false
      + enable_resource_name_dns_aaaa_record_on_launch = false
      + id                                             = (known after apply)
      + ipv6_cidr_block_association_id                 = (known after apply)
      + ipv6_native                                    = false
      + map_public_ip_on_launch                        = true
      + owner_id                                       = (known after apply)
      + private_dns_hostname_type_on_launch            = (known after apply)
      + tags                                           = {
          + "Environment" = "dev"
          + "ManagedBy"   = "terraform"
          + "Name"        = "oaktree-dev-public-subnet-b"
          + "Project"     = "oaktree"
        }
      + tags_all                                       = {
          + "Environment" = "dev"
          + "ManagedBy"   = "terraform"
          + "Name"        = "oaktree-dev-public-subnet-b"
          + "Project"     = "oaktree"
        }
      + vpc_id                                         = (known after apply)
    }

  # aws_vpc.app_vpc will be created
  + resource "aws_vpc" "app_vpc" {
      + arn                                  = (known after apply)
      + cidr_block                           = "10.0.0.0/16"
      + default_network_acl_id               = (known after apply)
      + default_route_table_id               = (known after apply)
      + default_security_group_id            = (known after apply)
      + dhcp_options_id                      = (known after apply)
      + enable_dns_hostnames                 = true
      + enable_dns_support                   = true
      + enable_network_address_usage_metrics = (known after apply)
      + id                                   = (known after apply)
      + instance_tenancy                     = "default"
      + ipv6_association_id                  = (known after apply)
      + ipv6_cidr_block                      = (known after apply)
      + ipv6_cidr_block_network_border_group = (known after apply)
      + main_route_table_id                  = (known after apply)
      + owner_id                             = (known after apply)
      + tags                                 = {
          + "Environment" = "dev"
          + "ManagedBy"   = "terraform"
          + "Name"        = "oaktree-dev-vpc"
          + "Project"     = "oaktree"
        }
      + tags_all                             = {
          + "Environment" = "dev"
          + "ManagedBy"   = "terraform"
          + "Name"        = "oaktree-dev-vpc"
          + "Project"     = "oaktree"
        }
    }

Plan: 23 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  + alb_dns_name         = (known after apply)
  + app_url              = (known after apply)
  + docker_push_commands = (known after apply)
  + dynamodb_table_name  = "oaktree-dev-users"
  + ecr_repository_url   = (known after apply)
aws_cloudwatch_log_group.app_logs: Creating...
aws_iam_role.ecs_execution_role: Creating...
aws_vpc.app_vpc: Creating...
aws_ecs_cluster.app_cluster: Creating...
aws_iam_role.ecs_task_role: Creating...
aws_ecr_repository.app_repo: Creating...
aws_dynamodb_table.users_table: Creating...
aws_cloudwatch_log_group.app_logs: Creation complete after 1s [id=/ecs/oaktree-dev]
aws_ecr_repository.app_repo: Creation complete after 1s [id=oaktree-dev]
aws_iam_role.ecs_task_role: Creation complete after 2s [id=oaktree-dev-task-role]
aws_iam_role.ecs_execution_role: Creation complete after 2s [id=oaktree-dev-execution-role]
aws_iam_role_policy_attachment.task_execution_role_policy: Creating...
aws_iam_role_policy_attachment.task_execution_role_policy: Creation complete after 0s [id=oaktree-dev-execution-role-20250413052623230700000001]
aws_dynamodb_table.users_table: Creation complete after 8s [id=oaktree-dev-users]
aws_iam_policy.dynamodb_access: Creating...
aws_ecs_task_definition.app_task: Creating...
aws_ecs_task_definition.app_task: Creation complete after 0s [id=oaktree-dev-task]
aws_iam_policy.dynamodb_access: Creation complete after 1s [id=arn:aws:iam::321225686735:policy/oaktree-dev-dynamodb-access]
aws_iam_role_policy_attachment.dynamodb_policy_attachment: Creating...
aws_iam_role_policy_attachment.dynamodb_policy_attachment: Creation complete after 0s [id=oaktree-dev-task-role-20250413052629997400000002]
aws_vpc.app_vpc: Still creating... [10s elapsed]
aws_ecs_cluster.app_cluster: Still creating... [10s elapsed]
aws_ecs_cluster.app_cluster: Creation complete after 11s [id=arn:aws:ecs:ap-southeast-1:321225686735:cluster/oaktree-dev-cluster]
aws_vpc.app_vpc: Creation complete after 13s [id=vpc-09537370ef51db7ea]
aws_internet_gateway.igw: Creating...
aws_subnet.public_subnet_b: Creating...
aws_security_group.alb_sg: Creating...
aws_subnet.public_subnet_a: Creating...
aws_lb_target_group.app_tg: Creating...
aws_internet_gateway.igw: Creation complete after 1s [id=igw-083cfb99fc5c491ac]
aws_route_table.public_route_table: Creating...
aws_lb_target_group.app_tg: Creation complete after 2s [id=arn:aws:elasticloadbalancing:ap-southeast-1:321225686735:targetgroup/oaktree-dev-tg/b142a231066384fa]
aws_route_table.public_route_table: Creation complete after 1s [id=rtb-00307379a8279faca]
aws_security_group.alb_sg: Creation complete after 3s [id=sg-0c268f61984d32976]
aws_security_group.app_sg: Creating...
aws_security_group.app_sg: Creation complete after 3s [id=sg-048446dacb12b708a]
aws_subnet.public_subnet_b: Still creating... [10s elapsed]
aws_subnet.public_subnet_a: Still creating... [10s elapsed]
aws_subnet.public_subnet_b: Creation complete after 11s [id=subnet-016cb6075b87385b8]
aws_route_table_association.public_b: Creating...
aws_subnet.public_subnet_a: Creation complete after 12s [id=subnet-0a9f35d0774fda6f8]
aws_route_table_association.public_a: Creating...
aws_lb.app_alb: Creating...
aws_route_table_association.public_b: Creation complete after 1s [id=rtbassoc-082538032d96c6ccf]
aws_route_table_association.public_a: Creation complete after 0s [id=rtbassoc-0c0f6dc8e46437a7f]
aws_lb.app_alb: Still creating... [10s elapsed]
aws_lb.app_alb: Still creating... [20s elapsed]
aws_lb.app_alb: Still creating... [30s elapsed]
aws_lb.app_alb: Still creating... [40s elapsed]
aws_lb.app_alb: Still creating... [50s elapsed]
aws_lb.app_alb: Still creating... [1m0s elapsed]
aws_lb.app_alb: Still creating... [1m10s elapsed]
aws_lb.app_alb: Still creating... [1m20s elapsed]
aws_lb.app_alb: Still creating... [1m30s elapsed]
aws_lb.app_alb: Still creating... [1m40s elapsed]
aws_lb.app_alb: Still creating... [1m50s elapsed]
aws_lb.app_alb: Still creating... [2m0s elapsed]
aws_lb.app_alb: Still creating... [2m10s elapsed]
aws_lb.app_alb: Still creating... [2m20s elapsed]
aws_lb.app_alb: Still creating... [2m30s elapsed]
aws_lb.app_alb: Still creating... [2m40s elapsed]
aws_lb.app_alb: Still creating... [2m50s elapsed]
aws_lb.app_alb: Still creating... [3m0s elapsed]
aws_lb.app_alb: Still creating... [3m10s elapsed]
aws_lb.app_alb: Creation complete after 3m12s [id=arn:aws:elasticloadbalancing:ap-southeast-1:321225686735:loadbalancer/app/oaktree-dev-alb/df81c7e3584c20bd]
aws_lb_listener.app_listener: Creating...
aws_lb_listener.app_listener: Creation complete after 1s [id=arn:aws:elasticloadbalancing:ap-southeast-1:321225686735:listener/app/oaktree-dev-alb/df81c7e3584c20bd/169b7e2ca712e1e0]
aws_ecs_service.app_service: Creating...
aws_ecs_service.app_service: Creation complete after 1s [id=arn:aws:ecs:ap-southeast-1:321225686735:service/oaktree-dev-cluster/oaktree-dev-service]

Apply complete! Resources: 23 added, 0 changed, 0 destroyed.

Outputs:

alb_dns_name = "oaktree-dev-alb-704533058.ap-southeast-1.elb.amazonaws.com"
app_url = "http://oaktree-dev-alb-704533058.ap-southeast-1.elb.amazonaws.com"
docker_push_commands = <<EOT
# Login to ECR
aws ecr get-login-password --region ap-southeast-1 | docker login --username AWS --password-stdin 321225686735.dkr.ecr.ap-southeast-1.amazonaws.com/oaktree-dev

# Build and push the Docker image
docker build -t 321225686735.dkr.ecr.ap-southeast-1.amazonaws.com/oaktree-dev:latest .
docker push 321225686735.dkr.ecr.ap-southeast-1.amazonaws.com/oaktree-dev:latest

# Force new deployment
aws ecs update-service --cluster oaktree-dev-cluster --service oaktree-dev-service --force-new-deployment --region ap-southeast-1

EOT
dynamodb_table_name = "oaktree-dev-users"
ecr_repository_url = "321225686735.dkr.ecr.ap-southeast-1.amazonaws.com/oaktree-dev"
rae@Rae:/mnt/c/Users/KHARDZ/Desktop/Week 4/oaktree/terraform$

